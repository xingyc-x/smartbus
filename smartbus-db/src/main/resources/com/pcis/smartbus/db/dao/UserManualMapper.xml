<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pcis.smartbus.db.dao.UserManualMapper">
    <resultMap id="BaseResultMap" type="com.pcis.smartbus.db.domain.SmartbusUser">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="id" jdbcType="INTEGER" property="id" />
        <result column="user_name" jdbcType="VARCHAR" property="userName" />
        <result column="real_name" jdbcType="VARCHAR" property="realName" />
        <result column="password" jdbcType="VARCHAR" property="password" />
        <result column="phone" jdbcType="VARCHAR" property="phone" />
        <result column="email" jdbcType="VARCHAR" property="email" />
        <result column="created" jdbcType="TIMESTAMP" property="created" />
        <result column="updated" jdbcType="TIMESTAMP" property="updated" />
        <result column="capacity" jdbcType="INTEGER" property="capacity" />
        <result column="company_id" jdbcType="INTEGER" property="companyId" />
    </resultMap>

    <select id= "selectByUserName" resultMap= "BaseResultMap">
        SELECT * FROM smartbus_user WHERE user_name = #{userName}
    </select>

    <select id= "getUserNum" resultType="java.lang.Integer">
        SELECT COUNT(id) FROM smartbus_user;
    </select>

    <select id= "getAPageUserDesc" resultMap= "BaseResultMap">
        SELECT * FROM smartbus_user ORDER BY ${sortBy} DESC LIMIT ${startNo},${pageSize};
    </select>

    <select id= "getAPageUserAsc" resultMap= "BaseResultMap">
        SELECT * FROM smartbus_user ORDER BY ${sortBy} LIMIT ${startNo},${pageSize};
    </select>

    <select id= "getAPageUser" resultMap= "BaseResultMap">
        <if test="direction == 'asc'">
        SELECT * FROM smartbus_user ORDER BY ${sortBy} LIMIT ${startNo},${pageSize};
        </if>
        <if test="direction == 'desc'">
            SELECT * FROM smartbus_user ORDER BY ${sortBy} DESC LIMIT ${startNo},${pageSize};
        </if>
    </select>

    <select id= "getAPageUserByNameSearch" resultMap= "BaseResultMap">
        <if test="direction == 'desc'">
            SELECT * FROM smartbus_user WHERE real_name LIKE #{searchContent} ORDER BY ${sortBy} DESC LIMIT ${startNo},${pageSize};
        </if>
        <if test="direction == 'asc'">
            SELECT * FROM smartbus_user WHERE real_name LIKE #{searchContent} ORDER BY ${sortBy} LIMIT ${startNo},${pageSize};
        </if>
    </select>

    <select id= "getAPageUserByCapacity" resultMap= "BaseResultMap">
        <if test="direction == 'desc'">
            SELECT * FROM smartbus_user WHERE capacity = ${capacity} ORDER BY ${sortBy} DESC LIMIT ${startNo},${pageSize};
        </if>
        <if test="direction == 'asc'">
            SELECT * FROM smartbus_user WHERE capacity = ${capacity} ORDER BY ${sortBy} LIMIT ${startNo},${pageSize};
        </if>
    </select>

    <select id= "getAPageUserByCompanySearch" resultMap= "BaseResultMap">
        <if test="direction == 'desc'">
            SELECT smartbus_user.* FROM smartbus_user,company WHERE smartbus_user.company_id=company.id AND company.company_name LIKE #{searchContent} ORDER BY smartbus_user.${sortBy} DESC;
        </if>
        <if test="direction == 'asc'">
            SELECT smartbus_user.* FROM smartbus_user,company WHERE smartbus_user.company_id=company.id AND company.company_name LIKE #{searchContent} ORDER BY smartbus_user.${sortBy};
        </if>
    </select>

    <select id= "getUserNumByNameSearch" resultType="java.lang.Integer">
        SELECT COUNT(id) FROM smartbus_user WHERE real_name LIKE #{searchContent};
    </select>

    <select id= "getUserNumByCapacity" resultType="java.lang.Integer">
        SELECT COUNT(id) FROM smartbus_user WHERE real_name LIKE ${capacity};
    </select>

    <select id= "getUserNumByCompanySearch" resultType="java.lang.Integer">
        SELECT COUNT(smartbus_user.id) FROM smartbus_user,company WHERE smartbus_user.company_id=company.id AND company.company_name LIKE #{searchContent};
    </select>

</mapper>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>添加项目</title>
    <!--框架必需-->
    <script src="/libs/quickui/libs/js/jquery.js"></script>
    <script src="/libs/quickui/libs/js/language/cn.js"></script>
    <script src="/libs/quickui/libs/js/framework.js"></script>
    <link rel="stylesheet" href="/libs/quickui/libs/css/import_basic.css" type="text/css" />
    <link rel="stylesheet" type="text/css" id="skin" prePath="/libs/quickui/" />
    <link rel="stylesheet" type="text/css" id="customSkin" />
    <!--框架必需end-->

    <!-- 日期选择框start -->
    <script type="text/javascript" src="/libs/quickui/libs/js/form/datePicker/WdatePicker.js"></script>
    <!-- 日期选择框end -->

    <!-- 数字步进器start -->
    <script type="text/javascript" src="/libs/quickui/libs/js/form/stepper.js"></script>
    <!-- 数字步进器end -->

    <script src="/libs/quickui/libs/js/form/form.js" type="text/javascript"></script>
    <!-- 表单验证start -->
    <script src="/libs/quickui/libs/js/form/validationRule.js" type="text/javascript"></script>
    <script src="/libs/quickui/libs/js/form/validation.js" type="text/javascript"></script>
    <!-- 表单验证end -->

    <script type="text/javascript"  src="getUrlParam.js"></script>
</head>
<style>
    .formLayoutContent{
        border: 0!important;
    }
    .formLayoutContent  .ele{
        /*在这里自定义表单元素容器宽度*/
    }
    .formLayoutContent  .eleValidateInfo{
        /*在这里自定义表单元素容器宽度*/
    }
</style>
<script>
    var order = getQueryString("order");
    //alert(order);
    function getQueryString(name) {
        var result = window.location.search.match(new RegExp("[\?\&]" + name + "=([^\&]+)", "i"));
        if (result == null || result.length < 1) {
            return "";
        }
        return result[1];
    }

    function initComplete(){
        //表单提交
        $('#form').submit(function(){
            //判断表单的客户端验证是否通过
            var valid = $('#form').validationEngine({returnIsValid: true});
            if(valid){
                $(this).ajaxSubmit({
                    //表单提交成功后的回调
                    success: function(responseText, statusText, xhr, $form){
                        if(!responseText.status){
                            top.Toast("showErrorToast", "修改失败！");
                        }
                        else{
                            top.Toast("showSuccessToast","修改成功！");
                            saveHandler();
                        }
                    }
                });
            }

            //阻止表单默认提交事件
            return false;
        });


        $.post("/quickui/projectAction.do?method=preUpdateAjax",{"order":order},
            function(result){
                $("#displayorder").val(result.order);
                $('#form').ajaxWrite({data:result});
            },"json");
    }


    function submitHandler(){
        //判断表单的客户端验证是否通过
        var valid = $('#form').validationEngine({returnIsValid: true, showOnMouseOver:false});
        if(valid){
            $('#form').submit()
        }
        //阻止表单默认提交事件
        return false;
    }

    function saveHandler(){
        //刷新数据
        top.frmright.refresh(true);
        //关闭窗口
        top.Dialog.close();
    }

    $(function(){
        $("#address").on("click", function() {
            var diag = new top.Dialog();
            diag.ID = "a21";
            diag.Title = "选择详细地址";
            diag.URL = "../../html/dialogContentMap1.html";
            diag.Width = 800;
            diag.Height = 600;
            diag.show();
        });

    });

</script>
<body>
<div class="page_content">
    <div class="infoCard">
        <div class="title">
            <span>信息添加</span>
        </div>
        <div class="content">
            <table cellpadding="0" cellspacing="0" width="100%">
                <tr>
                    <td width="100%" class="ver01">
                        <form id="form" method="post" action="dialog_content_project.html" showOnMouseOver="false" >
                            <div class="formLayout">
                                <div class="formLayoutContent">
                                    <table class="formStyle">
                                        <input type="hidden" id ="sysUserId" name="sysUserId" />
                                        <tr>
                                            <td width="110" class="ali03">项目编号：</td>
                                            <td width="200">
                                                <!--项目编号不可更改-->
                                                <input type="text" value="" id="displayorder" disabled="disabled" fillType="textinput"/>
                                                <input type="hidden" name="order" value=""/>
                                            </td>
                                        </tr>

                                        <tr>
                                            <td class="ali03">客户公司：</td>
                                            <td><input type="text" id="companyName" name="company" value="" fillType="textinput" class="validate[required] float_left"/></td>
                                            <td>
                                                <span class="star">*</span>
                                            </td>
                                            <td><div class="validation_info">请输入公司全称</div></td>
                                        </tr>

                                        <tr>
                                            <td class="ali03">详细地址：</td>
                                            <td ><input type="text" id="address" name="address" /></td>
                                            <td>
                                                <span class="star">*</span>
                                            </td>
                                            <td><div class="validation_info">请单击选择详细地址</div></td>

                                        </tr>

                                        <tr>
                                            <td class="ali03">项目简介：</td>
                                            <td colspan="3"><textarea  name="info" style="width:100%;" class="validate[required]"></textarea></td>
                                            <td>
                                                <span class="star">*</span>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </form>
                    </td>
                </tr>
            </table>
        </div>
    </div>
</div>
</body>
</html>